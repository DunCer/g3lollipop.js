!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("d3")):"function"==typeof define&&define.amd?define(["exports","d3"],e):e((t.g3=t.g3||{},t.g3.utils=t.g3.utils||{}),t.d3)}(this,function(t,e){"use strict";e=e&&e.hasOwnProperty("default")?e.default:e;var n={bottlerocket1:["#A42820","#5F5647","#9B110E","#3F5151","#4E2A1E","#550307","#0C1707"],bottlerocket2:["#FAD510","#CB2314","#273046","#354823","#1E1E1E"],rushmore1:["#E1BD6D","#F2300F","#35274A","#EABE94","#0B775E"],royal1:["#899DA4","#C93312","#FAEFD1","#DC863B"],royal2:["#9A8822","#F5CDB4","#F8AFA8","#FDDDA0","#74A089"],zissou1:["#3B9AB2","#78B7C5","#EBCC2A","#E1AF00","#F21A00"],darjeeling1:["#FF0000","#00A08A","#F2AD00","#F98400","#5BBCD6"],darjeeling2:["#ECCBAE","#046C9A","#D69C4E","#ABDDDE","#000000"],chevalier1:["#446455","#FDD262","#D3DDDC","#C7B19C"],fantasticfox1:["#DD8D29","#E2D200","#46ACC8","#E58601","#B40F20"],moonrise1:["#F3DF6C","#CEAB07","#D5D5D3","#24281A"],moonrise2:["#798E87","#C27D38","#CCC591","#29211F"],moonrise3:["#85D4E3","#F4B5BD","#9C964A","#CDC08C","#FAD77B"],cavalcanti1:["#D8B70A","#02401B","#A2A475","#81A88D","#972D15"],grandbudapest1:["#F1BB7B","#FD6467","#5B1A18","#D67236"],grandbudapest2:["#E6A0C4","#C6CDF7","#D8A499","#7294D4"],google16:["#3366cc","#dc3912","#ff9900","#109618","#990099","#0099c6","#dd4477","#66aa00","#b82e2e","#316395","#994499","#22aa99","#aaaa11","#6633cc","#e67300","#8b0707","#651067","#329262","#5574a6","#3b3eac"],google5:["#008744","#0057e7","#d62d20","#ffa700","#ffffff"],material1:["#263238","#212121","#3e2723","#dd2c00","#ff6d00","#ffab00","#ffd600","#aeea00","#64dd17","#00c853","#00bfa5","#00b8d4","#0091ea","#2962ff","#304ffe","#6200ea","#aa00ff","#c51162","#d50000"],pie1:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99"],pie2:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00"],pie3:["#495769","#A0C2BB","#F4A775","#F4C667","#F37361"],pie4:["#FA7921","#E55934","#9BC53D","#FDE74C","#5BC0EB"],pie5:["#5DA5DA","#4D4D4D","#60BD68","#B2912F","#B276B2","#F15854","#FAA43A"],pie6:["#537ea2","#42a593","#9f1a1a","#7c5f95","#61a070"],pie7:["#bddff9","#1e72bf","#ead1ab","#a2dbc5","#c7ae7d"],breakfast:["#b6411a","#eec3d8","#4182dd","#ecf0c8","#2d6328"],set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],category10:["#1f77b4","#2ca02c","#d62728","#ff7f0e","#9467bd","#8c564b","#e377c2","#7f7f7f","#bcbd22","#17becf"],pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"],pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#bf5b17","#386cb0","#f0027f","#666666"],dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"]};function r(){return n.google16}function a(t){return t in n?n[t]:r}var o=o||function(t){if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,n=function(){return t.URL||t.webkitURL||t},r=e.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in r,o=/constructor/i.test(t.HTMLElement)||t.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent),i=t.setImmediate||t.setTimeout,f=function(t){i(function(){throw t},0)},c=function(t){setTimeout(function(){"string"==typeof t?n().revokeObjectURL(t):t.remove()},4e4)},s=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},u=function(e,u,d){d||(e=s(e));var p,g=this,y="application/octet-stream"===e.type,h=function(){!function(t,e,n){for(var r=(e=[].concat(e)).length;r--;){var a=t["on"+e[r]];if("function"==typeof a)try{a.call(t,n||t)}catch(t){f(t)}}}(g,"writestart progress write writeend".split(" "))};if(g.readyState=g.INIT,a)return p=n().createObjectURL(e),void i(function(){var t,e;r.href=p,r.download=u,t=r,e=new MouseEvent("click"),t.dispatchEvent(e),h(),c(p),g.readyState=g.DONE},0);!function(){if((l||y&&o)&&t.FileReader){var r=new FileReader;return r.onloadend=function(){var e=l?r.result:r.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,g.readyState=g.DONE,h()},r.readAsDataURL(e),void(g.readyState=g.INIT)}p||(p=n().createObjectURL(e)),y?t.location.href=p:t.open(p,"_blank")||(t.location.href=p);g.readyState=g.DONE,h(),c(p)}()},d=u.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,n){return e=e||t.name||"download",n||(t=s(t)),navigator.msSaveOrOpenBlob(t,e)}:(d.abort=function(){},d.readyState=d.INIT=0,d.WRITING=1,d.DONE=2,d.error=d.onwritestart=d.onprogress=d.onwrite=d.onabort=d.onerror=d.onwriteend=null,function(t,e,n){return new u(t,e||t.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||void 0);t.getTextWidth=function(t,e){var n=(this.canvas||(this.canvas=document.createElement("canvas"))).getContext("2d");return n.font=e,n.measureText(t).width},t.getUniqueID=function(t,e){return t=t||1e5,e=e||1e6-1,Math.floor(Math.random()*(e-t)+t)},t.appendValueToDomain=function(t,e){if(void 0===e||t.length<=1||t[t.length-1]>=e)return t;var n=Math.abs(t[1]-t[0]);return Math.abs(e-t[t.length-1])>n/2?t.push(e):t[t.length-1]=e,t},t.isObjectEmpty=function(t){return void 0===t||0===Object.keys(t).length&&t.constructor===Object},t.palettes=n,t.defaultPalette=r,t.getPalette=a,t.listPalettes=function(){return Object.keys(n)},t.scaleOrdinal=function(t){return e.scaleOrdinal(a(t))},t.output=function(){function t(t,e){return(t=t||n)+"."+e}function e(t){t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),function(t,e){var n=document.createElement("style");n.setAttribute("type","text/css"),n.innerHTML=t;var r=e.hasChildNodes()?e.children[0]:null;e.insertBefore(n,r)}(function(t){var e=[];e.push("#"+t.id);for(let n=0;n<t.classList.length;n++)c("."+t.classList[n],e)||e.push("."+t.classList[n]);var n=t.getElementsByTagName("*");for(let t=0;t<n.length;t++){var r=n[t].id;c("#"+r,e)||e.push("#"+r);var a=n[t].classList;for(let t=0;t<a.length;t++)c("."+a[t],e)||e.push("."+a[t])}var o="";for(let t=0;t<document.styleSheets.length;t++){var l=document.styleSheets[t];try{if(!l.cssRules)continue}catch(t){if("SecurityError"!==t.name)throw t;continue}for(var i=l.cssRules,f=0;f<i.length;f++)c(i[f].selectorText,e)&&(o+=i[f].cssText)}return o;function c(t,e){return-1!==e.indexOf(t)}}(t),t);var e=(new XMLSerializer).serializeToString(t);return e=(e=e.replace(/(\w+)?:?xlink=/g,"xmlns:xlink=")).replace(/NS\d+:href/g,"xlink:href")}var n="output",r="svg";function a(t){r=t||r}return a.toSVG=function(n){n=t(n,"svg");var a=e(document.querySelector(r)),l=new Blob([a],{type:"image/svg+xml"});o(l,n)},a.toPNG=function(n){n=t(n,"png");var a=document.querySelector(r),l=+a.getAttribute("width"),i=+a.getAttribute("height"),f=e(a),c="data:image/svg+xml;base64,"+btoa(unescape(encodeURIComponent(f))),s=document.createElement("canvas");s.width=l,s.height=i;var u=s.getContext("2d"),d=new Image;d.src=c,d.onload=function(){u.clearRect(0,0,l,i),u.drawImage(d,0,0,l,i),s.toBlob(function(t){o(t,n)})}},a},t.legend=function(t,n,r){var a=!0,o={left:10,right:0,top:5,bottom:5},l=e.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout");t=t||"svg",n=n||!1,r=r||[];var i="normal 12px sans-serif",f="black",c="bold 12px sans-serif",s="black";return{set target(e){t=e},get target(){return t},set title(t){n=t},get title(){return n},set series(t){r=t},get series(){return r},set margin(t){o=t},get margin(){return o},set dispatch(t){l=t},get dispatch(){return l},set interactive(t){a=t},get interactive(){return a},set labelFont(t){i=t},get labelFont(){return i},set labelColor(t){f=t},get labelColor(){return f},set titleFont(t){c=t},get titleFont(){return c},set titleColor(t){s=t},get titleColor(){return s},addSeries:function(t){t.key in Object.keys(r)||r.push(t)},getLegendStatus:function(){return r.map(function(t){return{key:t.key,status:t._status||!0}})},draw:function(){r.forEach(t=>t._status=!0);let u=e.select(t),d=+u.attr("width"),p=+u.attr("height"),g=d-(o.left||0)-(o.right||0),y=u.append("g").attr("class","g3 g3-legend").attr("transform","translate("+o.left+","+(p+o.top)+")"),h=n?g3.utils.getTextWidth(n,c):0,b=Math.min(h+6,1/3*g),m=g-b,v={x:0,y:8},x={x:0,y:8};n&&y.append("g").attr("class","g3 g3-legend-title").append("text").attr("x",b-6).attr("y",8).attr("text-anchor","end").attr("fill",s).style("font",c).attr("dy","0.35em").text(n),y.append("g").attr("class","g3 g3-legend-item-container").attr("transform","translate("+b+", 0)").selectAll(".g3-legend-item").data(r).enter().append("g").attr("class","g3 g3-legend-item").style("cursor",a?"pointer":"default").each(function(t){let n=e.select(this),r=t.value.label||t.key;var o;o=g3.utils.getTextWidth(r,i),(o+=23)>m-x.x?(v.x=0,v.y=x.y+16,x.x=o,x.y=v.y):(v.x=x.x,x.x+=o);let c=v.x+12+3,s=v.y;n.attr("state","enabled").attr("defaultColor",t.value.fill),n.append("circle").attr("cx",c).attr("cy",s).attr("r",3).attr("fill",t.value.fill||"transparent").attr("stroke-width",1).attr("stroke","grey"),c+=8,n.append("text").attr("x",c).attr("y",s).attr("text-anchor","start").attr("fill",f).style("font",i).attr("dy","0.35em").text(r),n.on("click",function(){var e,r,o,i;a&&(r=(e=n).attr("defaultColor"),o=e.select("circle"),i=e.select("text"),"enabled"==e.attr("state")?(e.attr("state","disabled"),o.attr("fill","transparent").attr("stroke",r),i.style("opacity",.5)):(e.attr("state","enabled"),o.attr("fill",r).attr("stroke","grey"),i.style("opacity",1)),l.call("legendClick",this,t.key,"enabled"==n.attr("state")),t._status="enabled"==n.attr("state"))})}),u.attr("height",p+o.top+v.y+8+o.bottom)}}},t.tooltip=function(){var t=function(){return"n"},n=function(){return[0,0]},r=function(){return" "},a=document.body,o=d(),l=null,i=null,f=null;function c(t){var e;e=t.node(),(l=e?"svg"===e.tagName.toLowerCase()?e:e.ownerSVGElement:null)&&(i=l.createSVGPoint(),a.appendChild(o))}c.show=function(){var e=Array.prototype.slice.call(arguments);e[e.length-1]instanceof SVGElement&&(f=e.pop());var o,l=r.apply(this,e),i=n.apply(this,e),d=t.apply(this,e),g=p(),y=u.length,h=document.documentElement.scrollTop||a.scrollTop,b=document.documentElement.scrollLeft||a.scrollLeft;for(g.html(l).style("opacity",1).style("pointer-events","all");y--;)g.classed(u[y],!1);return o=s.get(d).apply(this),g.classed(d,!0).style("top",o.top+i[0]+h+"px").style("left",o.left+i[1]+b+"px"),c},c.hide=function(){return p().style("opacity",0).style("pointer-events","none"),c},c.attr=function(t,n){if(arguments.length<2&&"string"==typeof t)return p().attr(t);var r=Array.prototype.slice.call(arguments);return e.selection.prototype.attr.apply(p(),r),c},c.style=function(t,n){if(arguments.length<2&&"string"==typeof t)return p().style(t);var r=Array.prototype.slice.call(arguments);return e.selection.prototype.style.apply(p(),r),c},c.direction=function(e){return arguments.length?(t=null==e?e:y(e),c):t},c.offset=function(t){return arguments.length?(n=null==t?t:y(t),c):n},c.html=function(t){return arguments.length?(r=null==t?t:y(t),c):r},c.rootElement=function(t){return arguments.length?(a=null==t?t:y(t),c):a},c.destroy=function(){return o&&(p().remove(),o=null),c};var s=e.map({n:function(){var t=g();return{top:t.n.y-o.offsetHeight,left:t.n.x-o.offsetWidth/2}},s:function(){var t=g();return{top:t.s.y,left:t.s.x-o.offsetWidth/2}},e:function(){var t=g();return{top:t.e.y-o.offsetHeight/2,left:t.e.x}},w:function(){var t=g();return{top:t.w.y-o.offsetHeight/2,left:t.w.x-o.offsetWidth}},nw:function(){var t=g();return{top:t.nw.y-o.offsetHeight,left:t.nw.x-o.offsetWidth}},ne:function(){var t=g();return{top:t.ne.y-o.offsetHeight,left:t.ne.x}},sw:function(){var t=g();return{top:t.sw.y,left:t.sw.x-o.offsetWidth}},se:function(){var t=g();return{top:t.se.y,left:t.se.x}}}),u=s.keys();function d(){var t=e.select(document.createElement("div"));return t.style("position","absolute").style("top",0).style("opacity",0).style("pointer-events","none").style("box-sizing","border-box"),t.node()}function p(){return null==o&&(o=d(),a.appendChild(o)),e.select(o)}function g(t){for(var n=f||e.event.target;null==n.getScreenCTM&&null!=n.parentNode;)n=n.parentNode;var r={},a=n.getScreenCTM(),o=n.getBBox(),l=o.width,c=o.height,s=o.x,u=o.y;return i.x=s,i.y=u,r.nw=i.matrixTransform(a),i.x+=l,r.ne=i.matrixTransform(a),i.y+=c,r.se=i.matrixTransform(a),i.x-=l,r.sw=i.matrixTransform(a),i.y-=c/2,r.w=i.matrixTransform(a),i.x+=l,r.e=i.matrixTransform(a),i.x-=l/2,i.y-=c/2,r.n=i.matrixTransform(a),i.y+=c,r.s=i.matrixTransform(a),r}function y(t){return"function"==typeof t?t:function(){return t}}return c},Object.defineProperty(t,"__esModule",{value:!0})});