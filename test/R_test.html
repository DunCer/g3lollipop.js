<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8" />
    <script src="https://d3js.org/d3.v4.min.js"></script>
    <script src="../dist/g3-lollipop.js"></script>
    <link href="../css/style.css" rel="stylesheet" />
    <script>
        var x =
            '{"domainData":{"symbol":"TP53","uniprot":"P04637","length":393,"pfam":[{"hmm.acc":"PF08563","hmm.name":"P53_TAD","start":5,"end":29,"type":"Motif"},{"hmm.acc":"PF00870","hmm.name":"P53","start":95,"end":289,"type":"Domain"},{"hmm.acc":"PF07710","hmm.name":"P53_tetramer","start":319,"end":358,"type":"Motif"}]},"snvData":[{"Hugo_Symbol":"TP53","Protein_Change":"S90T","Sample_ID":"ACINAR26","Mutation_Type":"Missense_Mutation","Chromosome":17,"Start_Position":7579419,"End_Position":7579419,"Reference_Allele":"A","Variant_Allele":"T","Mutation_Class":"Missense","AA_Position":90},{"Hugo_Symbol":"TP53","Protein_Change":"Q317Sfs*28","Sample_ID":"ACINAR01","Mutation_Type":"Frame_Shift_Del","Chromosome":17,"Start_Position":7576897,"End_Position":7576897,"Reference_Allele":"G","Variant_Allele":"-","Mutation_Class":"Truncating","AA_Position":317},{"Hugo_Symbol":"TP53","Protein_Change":"L330Ffs*15","Sample_ID":"ACINAR25","Mutation_Type":"Frame_Shift_Del","Chromosome":17,"Start_Position":7576858,"End_Position":7576858,"Reference_Allele":"G","Variant_Allele":"-","Mutation_Class":"Truncating","AA_Position":330}],"plotSettings":{"background":"#f2f2f2","chartType":"pie","width":640,"lollipopTrackHeight":320,"annoHeight":30,"legendTitle":"mutation class","domainTextFont":"normal 10px/80% Arial, Helvetica, sans-serif","domainTextColor":"white"},"snvDataFormat":{"x":"AA_Position","y":"Protein_Change","factor":"Mutation_Class"},"domainDataFormat":{"symbol":"symbol","name":"uniprot","length":"length","domainType":"pfam","details":{"start":"start","end":"end","ac":"hmm.acc","name":"hmm.name"}}}';

        x = JSON.parse(x);

        var snvData, domainData, snvDataFormat, domainDataFormat, plotSettings;
        var lollipop;
        document.addEventListener('DOMContentLoaded', function () {
            //snvData = x.snvData;
            snvData = JSON.parse(
                '[{"Protein_Change":"L14Sfs*15","Mutation_Type":"Frame_Shift_Ins","Mutation_Class":"Truncating","AA_Position":14},{"Protein_Change":"Q16Rfs*28","Mutation_Type":"Frame_Shift_Del","Mutation_Class":"Truncating","AA_Position":16},{"Protein_Change":"T18Hfs*26","Mutation_Type":"Frame_Shift_Del","Mutation_Class":"Truncating","AA_Position":18},{"Protein_Change":"F19Kfs*24","Mutation_Type":"Frame_Shift_Del","Mutation_Class":"Truncating","AA_Position":19},{"Protein_Change":"S20Qfs*24","Mutation_Type":"Frame_Shift_Del","Mutation_Class":"Truncating","AA_Position":20},{"Protein_Change":"D21Tfs*23","Mutation_Type":"Frame_Shift_Del","Mutation_Class":"Truncating","AA_Position":21},{"Protein_Change":"L22Yfs*22","Mutation_Type":"Frame_Shift_Del","Mutation_Class":"Truncating","AA_Position":22},{"Protein_Change":"L22Yfs*22","Mutation_Type":"Frame_Shift_Del","Mutation_Class":"Truncating","AA_Position":22},{"Protein_Change":"X23_splice","Mutation_Type":"Splice_Site","Mutation_Class":"Truncating","AA_Position":23},{"Protein_Change":"W23*","Mutation_Type":"Nonsense_Mutation","Mutation_Class":"Truncating","AA_Position":23}]'
            );

            //snvDataFormat = x.snvDataFormat;
            snvDataFormat = {
                x: "AA_Position",
                y: "Protein_Change",
                factor: "Mutation_Class",
            };

            // domain data format
            domainData = x.domainData;
            domainDataFormat = x.domainDataFormat;
            //plotSettings = x.plotSettings;

            lollipop = g3.Lollipop("htmlwidget-a7c489bf4af4042993be");

            lollipop.data.snvData = snvData;
            lollipop.data.domainData = domainData;

            lollipop.format.snvData = snvDataFormat;
            lollipop.format.domainData = domainDataFormat;
            //lollipop.setOptions(plotSettings);

            lollipop.draw();
        });
    </script>
</head>

<body style="background-color:white;">
    <div id="htmlwidget_container">
        <div id="htmlwidget-a7c489bf4af4042993be" style="width:960px;height:500px;" class="g3Lollipop html-widget">
        </div>
    </div>

</body>

</html>